<!--
包含list页所需所有tmpl
-->
<script type="text/html" id="ListContainer">
<%
	var Mode = data.mode;
%>
<div class="block-flat">
	<form class="form-inline" id="J_SearchForm">
		<%if (Mode=='mine') {%>
		<div class="form-group">
			<label>单据状态</label>
			<select class="form-control">
				<option>全部</option>
				<option selected="selected">流程中</option>
				<option>已完结</option>
			</select>
		</div>
		<%}%>
		<%if (Mode=='approval') {%>
		<div class="form-group">
			<label>单据状态</label>
			<select class="form-control">
				<option>全部</option>
				<option selected="selected">待审批</option>
				<option>已审批</option>
			</select>
		</div>
		<%}%>
		<div class="form-group">
			<label>客户姓名</label>
			<input type="text" name="Name" class="form-control" placeholder="">
		</div>
		<div class="form-group">
			<label>房产证号</label>
			<input type="text" name="IdentityCode" class="form-control" placeholder="">
		</div>
		<button type="submit" class="btn btn-default btn-flat" data-hook="search">查找</button>
	</form>
	<hr/>
	<div id="ListContainer">
		<div class="loading">Loading...</div>
	</div>
</div>
</script>

<script type="text/html" id="List">
	<table class="no-border">
		<thead class="no-border">
			<tr>
				<th>编号</th>
				<th>业务员</th>
				<th>客户名称</th>
				<th>房产地址</th>
				<th>申请时间</th>
			</tr>
		</thead>
		<tbody class="no-border-x no-border-y" id="J_Lister">
			<%=this.ListItem(data)%>
		</tbody>
	</table>

	<div class="j-pager"></div>

</script>

<script type="text/html" id="ListItem">
<%
	var RString = require('risk/unit/string');
	var List = data||[];

	var i=0,Cur;
	if (List.length>0) {

		for(;Cur=List[i++];) {
%>
	<tr data-hook="view" class="pointer-item" data-id="<%=Cur.Project.ID%>" data-workflowid="<%=Cur.WorkflowID%>" data-activityid="<%=Cur.CurrentActivity&&Cur.CurrentActivity.ID%>" data-taskid="<%=Cur.TaskID%>">
		<td><%=Cur.Project.Name%></td>
		<td><%=Cur.Creator||'&nbsp;'%></td>
		<td>
			<table class="no-strip">

			<%
			var bi=0,CurBuyer,
				Buyers = Cur.Buyers||[];
			for(;CurBuyer=Buyers[bi++];) {
			%>
			<tr>
				<td class="col-sm-4"><small class="text-success">[买]</small> <%=CurBuyer.Name%></td>
			</tr>
			<%
			}
			%>

			<%
			var bi=0,CurSeller,
				Sellers = Cur.Sellers||[];
			for(;CurSeller=Sellers[bi++];) {
			%>
			<tr>
				<td class="col-sm-4"><small class="text-danger">[卖]</small> <%=CurSeller.Name%></td>
			</tr>
			<%
			}
			%>

			</table>
		</td>
		<td>
			<table class="no-strip">
			<%
			var bi=0,CurAssets,
				Assets = Cur.Assets||[];
			for(;CurAssets=Assets[bi++];) {
			%>
			<tr>
				<td><%=CurAssets.Address%></td>
			</tr>
			<%
			}
			%>
			</table>
		</td>
		<td><%=RString.date(Cur.Project.CreateTime,'yyyy-MM-dd HH:mm:ss')%></td>
	</tr>
<%
		}
	}else{
%>
	<tr>
	<td colspan="5">
		<div class="alert alert-info" role="alert">没有客户信息</div>
	</td>
	</tr>
<%
	}
%>
</script>